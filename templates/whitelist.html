<!-- whitelist.html -->
{% extends "base.html" %}
{% block content %}
<h1 class="title">Whitelist</h1>

<form method="post" class="mb-4">
  <div class="field has-addons">
    <div class="control is-expanded">
      <input class="input" type="text" name="sender_address" placeholder="Adresse wie name@domain oder *@domain" required>
    </div>
    <div class="control">
      <button type="submit" class="button is-success">➕ Hinzufügen</button>
    </div>
  </div>
</form>

<table class="table is-fullwidth">
  <thead>
    <tr>
      <th>Adresse</th>
      <th>Aktion</th>
    </tr>
  </thead>
  <tbody>
    {% for entry in whitelist %}
    <tr>
      <td>{{ entry.sender_address }}</td>
      <td>
        <form method="post" action="/whitelist/delete" style="display:inline">
          <input type="hidden" name="id" value="{{ entry.id }}">
          <button class="button is-danger is-small" onclick="return confirm('Eintrag wirklich löschen?')">❌ Löschen</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
